<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ETA Calculator</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.25.6/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      margin: 0;
      padding: 0;
    }
    
    input, textarea, select {
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .logo-animate {
      animation: fadeIn 1s ease-in;
    }
    
    .tooltip {
      position: relative;
      display: inline-block;
    }
    
    .tooltip .tooltip-text {
      visibility: hidden;
      background-color: #1E3A8A;
      color: white;
      text-align: center;
      border-radius: 6px;
      padding: 4px 8px;
      position: absolute;
      z-index: 10;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 12px;
      white-space: nowrap;
      min-width: 0;
    }
    
    .tooltip:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }
    
    .tooltip .tooltip-text::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: #1E3A8A transparent transparent transparent;
    }
    
    .animate-spin {
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .shadow-lg {
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    
    .border-blue-200 {
      border-color: #DBEAFE;
    }
    
    .bg-gradient-to-r {
      background-image: linear-gradient(to right, var(--tw-gradient-stops));
    }
    
    .from-blue-50 {
      --tw-gradient-from: #EFF6FF;
      --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(239, 246, 255, 0));
    }
    
    .to-white {
      --tw-gradient-to: #FFFFFF;
    }
    
    .app-container {
      width: 100%;
      max-width: 36rem;
      min-height: 600px;
    }
    
    .summary-section {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    
    .summary-header {
      font-size: 1.25rem;
      font-weight: 700;
      color: #1e3a8a;
      margin-bottom: 0.75rem;
    }
    
    .summary-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      align-items: flex-end;
    }
    
    .summary-label {
      font-weight: 500;
      color: #374151;
    }
    
    .summary-value {
      color: #4b5563;
    }
    
    .final-price {
      background-color: #F3E8FF;
      padding: 0.5rem;
      border-radius: 0.375rem;
      font-size: 1.25rem;
    }
    
    .modal {
      display: flex;
      justify-content: center;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 20;
    }
    
    .modal-content {
      background-color: white;
      padding: 2rem;
      border-radius: 0.5rem;
      width: 90%;
      max-width: 500px;
      text-align: center;
      position: relative;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .close-button {
      position: absolute;
      top: 1rem;
      right: 1rem;
      cursor: pointer;
      font-size: 1.5rem;
      color: #4B5563;
    }
    
    .close-button:hover {
      color: #1E3A8A;
    }
    
    .disclaimer-section {
      margin-top: 1rem;
      padding: 0.5rem;
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
      font-size: 0.75rem;
      color: #6b7280;
      text-align: left;
    }
    
    @keyframes blink {
      50% { opacity: 0; }
    }
    .blink {
      animation: blink 1s step-end infinite;
      color: red;
      font-weight: bold;
    }
    
    @media (max-width: 640px) {
      .app-container {
        padding: 1rem;
      }
      label {
        font-size: 14px;
      }
      input, select, button {
        font-size: 14px;
        padding: 0.5rem;
      }
      h1 {
        font-size: 1.5rem;
      }
      .result-text {
        font-size: 12px;
      }
      .tooltip .tooltip-text {
        width: 200px;
      }
      .summary-header {
        font-size: 1rem;
      }
      .final-price {
        font-size: 1rem;
      }
      .modal-content {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body class="bg-gray-200 min-h-screen flex items-center justify-center">
  <div id="root"></div>
  
  <script type="text/babel">
    const translations = {
      en: {
        title: "ETA Calculator",
        welcomeTitle: "Welcome to ETA Calculator",
        welcomeMessage: "We are pleased to welcome you to the ETA Calculator, a tool designed to determine the Estimated Date of Departure (ETD) based on the Required Date of Arrival (ETA), destination country, port of discharge, and optional pricing details. This application ensures accurate scheduling and cost estimation for your shipments.",
        welcomeInstruction2: "<br><ul><li><b>Please select your preferred language to proceed.<b></li></ul>",
        etaLabel: "Required Date of Arrival (ETA)",
        etaTooltip: "Select the required arrival date",
        todayButton: "Today",
        countryLabel: "Country",
        countryTooltip: "Select the destination country",
        regionLabel: "Region",
        regionTooltip: "Select the region (for China only)",
        podLabel: "Port of Discharge (POD)",
        podTooltip: "Select the port of discharge",
        unitPriceLabel: "Unit Price (USD/MT)",
        unitPriceTooltip: "Enter the base unit price per metric ton (optional, e.g., 575)",
        smallBags20kg: "Small bags - 20kg/25kg FFS/Laminated PP (15 USD/MT additional)",
        smallBags20kgTooltip: "Adds 15 USD per metric ton to the unit price",
        smallBagsKraft: "Small bags - 20kg/25kg Kraft (25 USD/MT additional)",
        smallBagsKraftTooltip: "Adds 25 USD per metric ton to the unit price",
        calculateButton: "Calculate",
        calculating: "Calculating...",
        resetButton: "Reset",
        recentResults: "Recent Results",
        carianTerkini: "Carian Terkini",
        clearAll: "Clear All",
        selectOption: "Select",
        summary: "Summary",
        priceCalculator: "Price Calculator",
        priceCalculatorSubheader: "<i>Optional - proceed without this if ETD alone suffices</i>",
        etd: "Estimated Date of Departure (ETD)",
        pod: "Port of Discharge",
        preparationTime: "Preparation Time Needed",
        transitTime: "Transit Time",
        eta: "Required Date of Arrival (ETA)",
        unitPrice: "Unit Price",
        portAdditionalPrice: "Port Additional Price",
        bagAdditionalPrice: "Bag Additional Price",
        finalPrice: "Final Price",
        shippingDetails: "Shipping Details",
        timing: "Time Taken",
        pricing: "Pricing",
        resultMessage: "The shipment is scheduled to arrive at <pod> on the Required Date of Arrival (ETA) <eta>, with an Estimated Date of Departure (ETD) of <date>.",
        resultMessageWithPrice: "The shipment is scheduled to arrive at <pod> on the Required Date of Arrival (ETA) <eta>, with an Estimated Date of Departure (ETD) of <date> and a total price of <price> USD/MT.",
        noteETAAdjusted: "❖ The initial Required Date of Arrival (ETA) was set too early, not allowing the required preparation time plus transit time with an ETD at least 20 days from today. The adjusted Required Date of Arrival (ETA) is now ",
        noteSmallBags20kg: "<br>❖ Small bags - 20kg/25kg FFS/Laminated PP adds 15 USD/MT.",
        noteSmallBagsKraft: "<br>❖ Small bags - 20kg/25kg Kraft adds 25 USD/MT.",
        noteSpotPrice: "Port additional price is 'Spot' for <pod>, treated as 0 USD/MT.",
        disclaimer: "Disclaimer: The Estimated Date of Departure (ETD) and Required Date of Arrival (ETA) are based on the order entry into the Online Order system as of <currentdatetime>. These dates are subject to change based on operational conditions.",
        copyResult: "Copy Result",
        reviseETAMessage: "<span class='blink'><b>We cannot process the order.</b></span><br><br> The Estimated Date of Departure (ETD) must be at least 20 days from today, which is on or after <strong style='color: orange'> <earliestEtdDate></strong>. With the current Required Date of Arrival (ETA), the calculated ETD is <strong style='color: green'><calculatedEtdDate></strong>. We recommend adjusting to the earliest feasible ETA of <strong style='color: purple'><newdate></strong>."
      },
      zh: {
        title: "ETA 计算器",
        welcomeTitle: "歡迎使用 ETA 計算器",
        welcomeMessage: "好開心你嚟到呢度！ETA 計算器係一個專為確定預計離港日期 (ETD) 設計嘅工具，根據要求抵港日期 (Required ETA)、目的地國家、卸貨港同可選嘅定價細節提供準確嘅運輸排期同成本估算。",
        welcomeInstruction2: "<br><ul><li><b>請揀選你偏好嘅語言繼續。<b></li></ul>",
        etaLabel: "要求抵港日期 (ETA)",
        etaTooltip: "揀選要求到達日期",
        todayButton: "今日",
        countryLabel: "國家（地區）",
        countryTooltip: "揀選目的地國家",
        regionLabel: "地區",
        regionTooltip: "揀選地區（只限中國）",
        podLabel: "卸貨港 (POD)",
        podTooltip: "揀選卸貨港",
        unitPriceLabel: "單位價格 (美元/公噸)",
        unitPriceTooltip: "輸入每公噸嘅基礎單位價格（可選，例如 575）",
        smallBags20kg: "小袋 - 20公斤/25公斤 FFS/Laminated PP（額外 USD 15/公噸）",
        smallBags20kgTooltip: "每公噸增加 USD 15",
        smallBagsKraft: "小袋 - 20公斤/25公斤 Kraft（額外 USD 25/公噸）",
        smallBagsKraftTooltip: "每公噸增加 USD 25",
        calculateButton: "計算",
        calculating: "計算中...",
        resetButton: "重設",
        recentResults: "近期結果",
        carianTerkini: "近期搜尋",
        clearAll: "全部清除",
        selectOption: "揀選",
        summary: "摘要",
        priceCalculator: "價格計算器",
        priceCalculatorSubheader: "<i>可選 - 如果只係要 ETD 可以唔使填寫</i>",
        etd: "預計出發時間",
        pod: "卸貨港",
        preparationTime: "所需準備時間",
        transitTime: "運輸時間",
        eta: "要求抵港日期",
        unitPrice: "單位價格",
        portAdditionalPrice: "港口額外價格",
        bagAdditionalPrice: "袋子額外價格",
        finalPrice: "最終價格",
        shippingDetails: "運輸詳情",
        timing: "所需時間",
        pricing: "定價",
        resultMessage: "貨物預計於要求抵港日期 (ETA) <eta> 抵達 <pod>，預計出發時間 (ETD) 為 <date>",
        resultMessageWithPrice: "貨物預計於要求抵港日期 (ETA) <eta> 抵達 <pod>，預計出發時間 (ETD) 為 <date>，最終價格為 <price> 美元/公噸",
        noteETAAdjusted: "❖ 最初嘅要求抵港日期 (Required ETA) 太早，唔夠今日起至少 20 日嘅準備時間加運輸時間。新要求抵港日期已調整為 ",
        noteSmallBags20kg: "<br>❖ 小袋 - 20公斤/25公斤 FFS/Laminated PP 每公噸增加 USD 15。",
        noteSmallBagsKraft: "<br>❖ 小袋 - 20公斤/25公斤 Kraft 每公噸增加 USD 25。",
        noteSpotPrice: "港口額外價格為 '<pod>' 嘅 '即時價格'，視為 0 USD/公噸。",
        disclaimer: "免責聲明：預計離港日期 (ETD) 同要求抵港日期 (Required ETA) 日期基於訂單於 <currentdatetime> 進入線上訂單系統嘅數據。呢啲日期可能會因運營條件而變更。",
        copyResult: "複製結果",
        reviseETAMessage: "<span class='blink'>我哋無法處理呢個訂單。</span><br><br> 預計出發時間 (ETD) 必須至少喺今日起 20 日後，即 <strong style='color: orange'><earliestEtdDate></strong> 或之後。以目前嘅要求抵港日期 (ETA)，計算出嘅 ETD 係 <strong style='color: green'><calculatedEtdDate></strong>。請建議調整到最早嘅可能 ETA：<strong style='color: purple'><newdate></strong>"
      },
      "zh-cn": {
        title: "ETA 计算器",
        welcomeTitle: "欢迎使用 ETA 计算器",
        welcomeMessage: "欢饮光临~很高兴您来到这里！ETA 计算器是一个专为确定预计离港日期 (ETD) 设计的工具，根据要求抵港日期 (Required ETA)、目的地国家、卸货港以及可选的定价详情提供准确的运输排期和成本估算。",
        welcomeInstruction2: "<br><ul><li><b>请选择您偏好的语言以继续。<b></li></ul>",
        etaLabel: "要求抵港日期 (ETA)",
        etaTooltip: "选择要求到达日期",
        todayButton: "今天",
        countryLabel: "国家（地区）",
        countryTooltip: "选择目的地国家",
        regionLabel: "地区",
        regionTooltip: "选择地区（仅限中国）",
        podLabel: "卸货港 (POD)",
        podTooltip: "选择卸货港",
        unitPriceLabel: "单位价格 (美元/公吨)",
        unitPriceTooltip: "输入每公吨的基础单位价格（可选，例如 575）",
        smallBags20kg: "小袋 - 20公斤/25公斤 FFS/Laminated PP（额外 USD 15/公吨）",
        smallBags20kgTooltip: "每公吨增加 USD 15",
        smallBagsKraft: "小袋 - 20公斤/25公斤 Kraft（额外 USD 25/公吨）",
        smallBagsKraftTooltip: "每公吨增加 USD 25",
        calculateButton: "计算",
        calculating: "计算中...",
        resetButton: "重置",
        recentResults: "近期结果",
        carianTerkini: "近期搜索",
        clearAll: "全部清除",
        selectOption: "选择",
        summary: "摘要",
        priceCalculator: "价格计算器",
        priceCalculatorSubheader: "<i>可选 - 若仅需 ETD 则可省略此部分</i>",
        etd: "预计出发时间",
        pod: "卸货港",
        preparationTime: "所需准备时间",
        transitTime: "运输时间",
        eta: "要求抵港日期",
        unitPrice: "单位价格",
        portAdditionalPrice: "港口额外价格",
        bagAdditionalPrice: "袋子额外价格",
        finalPrice: "最终价格",
        shippingDetails: "运输详情",
        timing: "所需时间",
        pricing: "定价",
        resultMessage: "货物预计于要求抵港日期 (ETA) <eta> 到达 <pod>，预计出发时间 (ETD) 为 <date>",
        resultMessageWithPrice: "货物预计于要求抵港日期 (ETA) <eta> 到达 <pod>，预计出发时间 (ETD) 为 <date>，最终价格为 <price> 美元/公吨",
        noteETAAdjusted: "❖ 最初的要求抵港日期 (Required ETA) 过早，未能提供今日起至少 20 天所需的准备时间加运输时间。新要求抵港日期已调整为 ",
        noteSmallBags20kg: "<br>❖ 小袋 - 20公斤/25公斤 FFS/Laminated PP 每公吨增加 USD 15。",
        noteSmallBagsKraft: "<br>❖ 小袋 - 20公斤/25公斤 Kraft 每公吨增加 USD 25。",
        noteSpotPrice: "港口额外价格为 '<pod>' 的 '即时价格'，视为 0 USD/公吨。",
        disclaimer: "免责声明：预计离港日期 (ETD) 及要求抵港日期 (Required ETA) 日期基于订单于 <currentdatetime> 进入在线订单系统的记录。这些日期可能因运营条件而更改。",
        copyResult: "复制结果",
        reviseETAMessage: "<span class='blink'>我们无法处理此订单。</span><br><br> 预计出发时间 (ETD) 必须至少在今日起 20 天后，即 <strong style='color: orange'><earliestEtdDate></strong> 或之后。以当前要求抵港日期 (ETA)，计算出的 ETD 为 <strong style='color: green'><calculatedEtdDate></strong>。请建议调整到最早的可能 ETA：<strong style='color: purple'><newdate></strong>"
      },
      tr: {
        title: "ETA Hesaplayıcı",
        welcomeTitle: "ETA Hesaplayıcı'ya Hoş Geldiniz",
        welcomeMessage: "Sizi burada görmekten mutluluk duyuyoruz! ETA Hesaplayıcı, Gerekli Varış Tarihi (ETA) üzerinden Tahmini Kalkış Tarihi (ETD) belirlemek için tasarlanmış bir araçtır. Hedef ülke, boşaltma limanı ve isteğe bağlı fiyatlandırma detayları ile doğru planlama ve maliyet tahmini sunar.",
        welcomeInstruction2: "<br><ul><li><b>Lütfen devam etmek için tercih ettiğiniz dili seçin.</b></li></ul>",
        etaLabel: "Gerekli Varış Tarihi (ETA)",
        etaTooltip: "Gerekli varış tarihini seçin",
        todayButton: "Bugün",
        countryLabel: "Ülke",
        countryTooltip: "Hedef ülkeyi seçin",
        regionLabel: "Bölge",
        regionTooltip: "Bölgeyi seçin (yalnızca Çin için)",
        podLabel: "Boşaltma Limanı (POD)",
        podTooltip: "Boşaltma limanını seçin",
        unitPriceLabel: "Birim Fiyat (USD/MT)",
        unitPriceTooltip: "Metrik ton başına temel birim fiyatı girin (isteğe bağlı, örneğin 575)",
        smallBags20kg: "Küçük çantalar - 20kg/25kg FFS/Laminated PP (ekstra USD 15/MT)",
        smallBags20kgTooltip: "Metrik ton başına USD 15 ekler",
        smallBagsKraft: "Küçük çantalar - 20kg/25kg Kraft (ekstra USD 25/MT)",
        smallBagsKraftTooltip: "Metrik ton başına USD 25 ekler",
        calculateButton: "Hesapla",
        calculating: "Hesaplanıyor...",
        resetButton: "Sıfırla",
        recentResults: "Son Sonuçlar",
        carianTerkini: "Son Aramalar",
        clearAll: "Hepsini Temizle",
        selectOption: "Seç",
        summary: "Özet",
        priceCalculator: "Fiyat Hesaplayıcı",
        priceCalculatorSubheader: "<i>İsteğe bağlı - yalnızca ETD gerekiyorsa bu bölümü atlayabilirsiniz</i>",
        etd: "Tahmini Kalkış Tarihi (ETD)",
        pod: "Boşaltma Limanı",
        preparationTime: "Gerekli Hazırlık Süresi",
        transitTime: "Transit Süresi",
        eta: "Gerekli Varış Tarihi (ETA)",
        unitPrice: "Birim Fiyat",
        portAdditionalPrice: "Liman Ek Fiyatı",
        bagAdditionalPrice: "Çanta Ek Fiyatı",
        finalPrice: "Nihai Fiyat",
        shippingDetails: "Nakliye Detayları",
        timing: "Her Süreç İçin Geçen Zaman",
        pricing: "Fiyatlandırma",
        resultMessage: "Sevkiyatın Gerekli Varış Tarihi (ETA) <eta> tarihinde <pod> limanına ulaşması ve Tahmini Kalkış Tarihi (ETD) <date> olması bekleniyor",
        resultMessageWithPrice: "Sevkiyatın Gerekli Varış Tarihi (ETA) <eta> tarihinde <pod> limanına ulaşması ve Tahmini Kalkış Tarihi (ETD) <date> olması bekleniyor, nihai fiyatı <price> USD/MT",
        noteETAAdjusted: "❖ İlk Gerekli ETA süresi çok erkendi ve gerekli hazırlık süresi ile transit süresi bugün itibarıyla en az 20 gün sonra bir ETD sağlamadı. Yeni Gerekli ETA ",
        noteSmallBags20kg: "<br>❖ Küçük çantalar - 20kg/25kg FFS/Laminated PP her metrik ton için USD 15 ekler.",
        noteSmallBagsKraft: "<br>❖ Küçük çantalar - 20kg/25kg Kraft her metrik ton için USD 25 ekler.",
        noteSpotPrice: "Liman ek fiyatı '<pod>' için 'Spot' olarak belirlenmiş ve 0 USD/MT olarak kabul edilmiştir.",
        disclaimer: "Sorumluluk Reddi: Tahmini Kalkış Tarihi (ETD) ve Gerekli Varış Tarihi (Required ETA) tarihleri, siparişin <currentdatetime> tarihinde Online Sipariş sistemine girişine dayanmaktadır. Bu tarihler, operasyonel koşullara bağlı olarak değişebilir.",
        copyResult: "Sonucu Kopyala",
        reviseETAMessage: "<span class='blink'>Siparişi işleme koyamıyoruz.</span><br><br> Tahmini Kalkış Tarihi (ETD) bugünden itibaren en az 20 gün sonra olmalıdır, yani <strong style='color: orange'><earliestEtdDate></strong> veya sonrası. Şu anki Gerekli Varış Tarihi (ETA) ile hesaplanan ETD <strong style='color: green'><calculatedEtdDate></strong> tarihine denk geliyor. Lütfen en erken uygun ETA’yı önerin: <strong style='color: purple'><newdate></strong>."
      },
      ms: {
        title: "Kalkulator ETA",
        welcomeTitle: "Selamat Datang ke Kalkulator ETA",
        welcomeMessage: "Kami mengalu-alukan ketibaan anda ke Kalkulator ETA, alat yang direka untuk menentukan Tarikh Berlepas Anggaran (ETD) berdasarkan Tarikh Ketibaan Diperlukan (ETA), negara destinasi, pelabuhan pelepasan, dan butiran harga pilihan. Aplikasi ini memastikan penjadualan dan anggaran kos yang tepat untuk penghantaran anda.",
        welcomeInstruction2: "<br><ul><li><b>Sila pilih bahasa yang anda inginkan untuk meneruskan.</b></li></ul>",
        etaLabel: "Tarikh Ketibaan Diperlukan (ETA)",
        etaTooltip: "Pilih tarikh ketibaan yang diperlukan",
        todayButton: "Hari Ini",
        countryLabel: "Negara",
        countryTooltip: "Pilih negara destinasi",
        regionLabel: "Wilayah",
        regionTooltip: "Pilih wilayah (hanya untuk China)",
        podLabel: "Pelabuhan Pelepasan (POD)",
        podTooltip: "Pilih pelabuhan pelepasan",
        unitPriceLabel: "Harga Unit (USD/MT)",
        unitPriceTooltip: "Masukkan harga unit asas per tan metrik (pilihan, contohnya 575)",
        smallBags20kg: "Beg kecil - 20kg/25kg FFS/Laminated PP (USD 15/MT tambahan)",
        smallBags20kgTooltip: "Menambah USD 15 setiap tan metrik",
        smallBagsKraft: "Beg kecil - 20kg/25kg Kraft (USD 25/MT tambahan)",
        smallBagsKraftTooltip: "Menambah USD 25 setiap tan metrik",
        calculateButton: "Kira",
        calculating: "Mengira...",
        resetButton: "Tetapkan Semula",
        recentResults: "Keputusan Terkini",
        carianTerkini: "Carian Terkini",
        clearAll: "Kosongkan Semua",
        selectOption: "Pilih",
        summary: "Ringkasan",
        priceCalculator: "Kalkulator Harga",
        priceCalculatorSubheader: "<i>Pilihan - boleh dilangkau jika hanya memerlukan ETD</i>",
        etd: "Tarikh Berlepas Anggaran (ETD)",
        pod: "Pelabuhan Pelepasan",
        preparationTime: "Masa Persiapan Diperlukan",
        transitTime: "Masa Transit",
        eta: "Tarikh Ketibaan Diperlukan (ETA)",
        unitPrice: "Harga Unit",
        portAdditionalPrice: "Harga Tambahan Pelabuhan",
        bagAdditionalPrice: "Harga Tambahan Beg",
        finalPrice: "Harga Akhir",
        shippingDetails: "Butiran Penghantaran",
        timing: "Masa Diambil untuk Setiap Proses",
        pricing: "Penentuan Harga",
        resultMessage: "Penghantaran dijadualkan tiba di <pod> pada Tarikh Ketibaan Diperlukan (ETA) <eta>, dengan Tarikh Berlepas Anggaran (ETD) pada <date>",
        resultMessageWithPrice: "Penghantaran dijadualkan tiba di <pod> pada Tarikh Ketibaan Diperlukan (ETA) <eta>, dengan Tarikh Berlepas Anggaran (ETD) pada <date> dan harga akhir <price> USD/MT",
        noteETAAdjusted: "❖ Tarikh Ketibaan Diperlukan (ETA) awal terlalu awal, tidak cukup masa persiapan ditambah masa transit dengan Tarikh Berlepas Anggaran (ETD) sekurang-kurangnya 20 hari dari hari ini. Tarikh Ketibaan Diperlukan baru telah disesuaikan kepada ",
        noteSmallBags20kg: "<br>❖ Beg kecil - 20kg/25kg FFS/Laminated PP menambah USD 15 setiap tan metrik.",
        noteSmallBagsKraft: "<br>❖ Beg kecil - 20kg/25kg Kraft menambah USD 25 setiap tan metrik.",
        noteSpotPrice: "Harga tambahan pelabuhan adalah 'Spot' untuk <pod>, dianggap sebagai 0 USD/MT.",
        disclaimer: "Penafian: Tarikh Berlepas Anggaran (ETD) dan Tarikh Ketibaan Diperlukan (ETA) berdasarkan entri pesanan ke dalam sistem Pesanan Dalam Talian pada <currentdatetime>. Tarikh-tarikh ini tertakluk kepada perubahan berdasarkan keadaan operasi.",
        copyResult: "Salin Keputusan",
        reviseETAMessage: "<span class='blink'>Kami tidak dapat memproses pesanan ini.</span><br><br> Tarikh Berlepas Anggaran (ETD) mesti sekurang-kurangnya 20 hari dari hari ini, iaitu pada atau selepas <strong style='color: orange'><earliestEtdDate></strong>. Dengan Tarikh Ketibaan Diperlukan (ETA) semasa, Tarikh Berlepas Anggaran (ETD) yang dikira ialah <strong style='color: green'><calculatedEtdDate></strong>. Sila cadangkan penyesuaian ke Tarikh Ketibaan Diperlukan (ETA) paling awal yang mungkin: <strong style='color: purple'><newdate></strong>."
      }
    };

    const portsData = [
      { pod: "Chattogram", additionalPrice: 0, transitTime: 65, country: "Bangladesh", region: "Bangladesh" },
      { pod: "Chittagong", additionalPrice: 0, transitTime: 65, country: "Bangladesh", region: "Bangladesh" },
      { pod: "Anqing", additionalPrice: 8, transitTime: 60, country: "China", region: "South" },
      { pod: "Baiyang Port, Yichang", additionalPrice: 5, transitTime: 70, country: "China", region: "South" },
      { pod: "Changsha", additionalPrice: 7, transitTime: 75, country: "China", region: "South" },
      { pod: "Changzhou", additionalPrice: 16, transitTime: 60, country: "China", region: "South" },
      { pod: "Chongqing", additionalPrice: 12, transitTime: 75, country: "China", region: "South" },
      { pod: "Dalian", additionalPrice: 4, transitTime: 60, country: "China", region: "North" },
      { pod: "Dandong", additionalPrice: 8, transitTime: 60, country: "China", region: "North" },
      { pod: "Dongfa Old Port, Nansha", additionalPrice: 15, transitTime: 60, country: "China", region: "South" },
      { pod: "Huangpu", additionalPrice: 10, transitTime: 60, country: "China", region: "South" },
      { pod: "Jisi Port, Huangpu New Port", additionalPrice: 10, transitTime: 60, country: "China", region: "South" },
      { pod: "Jiujiang", additionalPrice: 9, transitTime: 60, country: "China", region: "South" },
      { pod: "Luzhou", additionalPrice: 32, transitTime: 75, country: "China", region: "South" },
      { pod: "Nanjing", additionalPrice: 0, transitTime: 60, country: "China", region: "South" },
      { pod: "Nansha", additionalPrice: 15, transitTime: 60, country: "China", region: "South" },
      { pod: "Ningbo", additionalPrice: 4, transitTime: 55, country: "China", region: "South" },
      { pod: "Qingdao", additionalPrice: 0, transitTime: 55, country: "China", region: "North" },
      { pod: "Qingyuan", additionalPrice: 13, transitTime: 60, country: "China", region: "South" },
      { pod: "Sanshui", additionalPrice: 0, transitTime: 60, country: "China", region: "South" },
      { pod: "Shanghai", additionalPrice: 0, transitTime: 55, country: "China", region: "South" },
      { pod: "Shekou", additionalPrice: 1, transitTime: 55, country: "China", region: "South" },
      { pod: "Tianjin", additionalPrice: 0, transitTime: 60, country: "China", region: "North" },
      { pod: "Wuhan", additionalPrice: 0, transitTime: 65, country: "China", region: "South" },
      { pod: "Xiamen", additionalPrice: 0, transitTime: 55, country: "China", region: "South" },
      { pod: "Xingang, Tianjin", additionalPrice: 0, transitTime: 60, country: "China", region: "North" },
      { pod: "Xinsha Port, Huangpu", additionalPrice: 10, transitTime: 65, country: "China", region: "South" },
      { pod: "Yantian", additionalPrice: 0, transitTime: 55, country: "China", region: "South" },
      { pod: "Yichang", additionalPrice: 12, transitTime: 70, country: "China", region: "South" },
      { pod: "Zhangjiagang", additionalPrice: 4, transitTime: 65, country: "China", region: "South" },
      { pod: "Belawan", additionalPrice: 10, transitTime: 50, country: "Indonesia", region: "Indonesia" },
      { pod: "Jakarta", additionalPrice: 10, transitTime: 50, country: "Indonesia", region: "Indonesia" },
      { pod: "Surabaya", additionalPrice: 10, transitTime: 50, country: "Indonesia", region: "Indonesia" },
      { pod: "Busan", additionalPrice: 0, transitTime: 55, country: "Korea", region: "Korea" },
      { pod: "Bintulu", additionalPrice: 15, transitTime: 65, country: "Malaysia", region: "Malaysia" },
      { pod: "Kuching", additionalPrice: 15, transitTime: 50, country: "Malaysia", region: "Malaysia" },
      { pod: "Port Klang", additionalPrice: 0, transitTime: 40, country: "Malaysia", region: "Malaysia" },
      { pod: "Penang", additionalPrice: 0, transitTime: 40, country: "Malaysia", region: "Malaysia" },
      { pod: "Sandakan", additionalPrice: 15, transitTime: 55, country: "Malaysia", region: "Malaysia" },
      { pod: "Sibu", additionalPrice: 15, transitTime: 45, country: "Malaysia", region: "Malaysia" },
      { pod: "Tawau", additionalPrice: 15, transitTime: 50, country: "Malaysia", region: "Malaysia" },
      { pod: "Yangon", additionalPrice: 0, transitTime: 50, country: "Myanmar", region: "Myanmar" },
      { pod: "Batangas", additionalPrice: 14, transitTime: 55, country: "Philippines", region: "Philippines" },
      { pod: "Cebu", additionalPrice: 0, transitTime: 60, country: "Philippines", region: "Philippines" },
      { pod: "Davao", additionalPrice: 0, transitTime: 50, country: "Philippines", region: "Philippines" },
      { pod: "Manila", additionalPrice: 0, transitTime: 55, country: "Philippines", region: "Philippines" },
      { pod: "Manila North Harbour", additionalPrice: 0, transitTime: 55, country: "Philippines", region: "Philippines" },
      { pod: "Manila South Harbour", additionalPrice: 0, transitTime: 55, country: "Philippines", region: "Philippines" },
      { pod: "Subic Bay", additionalPrice: 0, transitTime: 50, country: "Philippines", region: "Philippines" },
      { pod: "Singapore", additionalPrice: "Spot", transitTime: 45, country: "Singapore", region: "Singapore" },
      { pod: "Colombo", additionalPrice: 0, transitTime: 65, country: "Sri Lanka", region: "Sri Lanka" },
      { pod: "Kaohsiung", additionalPrice: 0, transitTime: 55, country: "Taiwan", region: "Taiwan" },
      { pod: "Keelung", additionalPrice: 8, transitTime: 55, country: "Taiwan", region: "Taiwan" },
      { pod: "Taichung", additionalPrice: 0, transitTime: 60, country: "Taiwan", region: "Taiwan" },
      { pod: "Taoyuan", additionalPrice: 5, transitTime: 55, country: "Taiwan", region: "Taiwan" },
      { pod: "Bangkok", additionalPrice: 0, transitTime: 50, country: "Thailand", region: "Thailand" },
      { pod: "Laem Chabang", additionalPrice: 0, transitTime: 50, country: "Thailand", region: "Thailand" },
      { pod: "Songkhla", additionalPrice: 10, transitTime: 50, country: "Thailand", region: "Thailand" },
      { pod: "Cai Mep Port, Ho Chi Minh", additionalPrice: 0, transitTime: 70, country: "Vietnam", region: "Vietnam" },
      { pod: "Cat Lai Port", additionalPrice: 0, transitTime: 50, country: "Vietnam", region: "Vietnam" },
      { pod: "Danang", additionalPrice: 0, transitTime: 50, country: "Vietnam", region: "Vietnam" },
      { pod: "Haiphong", additionalPrice: 0, transitTime: 50, country: "Vietnam", region: "Vietnam" },
      { pod: "Ho Chi Minh City Port", additionalPrice: 0, transitTime: 50, country: "Vietnam", region: "Vietnam" },
    ];

    const formatNumber = (num, decimals = 0) => {
      if (isNaN(num)) return "0";
      return Math.round(Number(num)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    };

    const formatDate = (date) => {
      return `${date.getDate().toString().padStart(2, '0')}/${(date.getMonth() + 1).toString().padStart(2, '0')}/${date.getFullYear()}`;
    };

    const formatTimeWithSeconds = (date) => {
      const hours = date.getHours();
      const minutes = date.getMinutes();
      const seconds = date.getSeconds();
      const ampm = hours >= 12 ? 'PM' : 'AM';
      const formattedHours = hours % 12 || 12;
      return `${formattedHours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')} ${ampm}`;
    };

    const formatFullDateTime = (date) => {
      return date.toLocaleString('en-US', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        hour12: true,
        timeZone: 'Asia/Hong_Kong'
      }) + ' HKT';
    };

    const getDaysDifference = (date1, date2) => {
      const diffTime = Math.abs(date2 - date1);
      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    };

    const addDays = (date, days) => {
      const result = new Date(date);
      result.setDate(result.getDate() + days);
      return result;
    };

    const subtractDays = (date, days) => {
      const result = new Date(date);
      result.setDate(result.getDate() - days);
      return result;
    };

    const Tooltip = ({ children, text }) => (
      <div className="tooltip">
        {children}
        <span className="tooltip-text">{text}</span>
      </div>
    );

    const AlertCircle = () => (
      <svg className="w-4 h-6" fill="black" viewBox="0 0 20 20">
        <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clipRule="evenodd" />
      </svg>
    );

    const Loader = () => (
      <svg className="animate-spin w-4 h-4" viewBox="0 0 24 24">
        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" />
      </svg>
    );

    const ETACalculator = () => {
      const today = new Date(); // Dynamic current date (08:19 PM HKT, June 27, 2025)
      const defaultEtaDate = new Date(today);
      defaultEtaDate.setDate(today.getDate() + 80); // Set default ETA to 80 days from today
      const [eta, setEta] = React.useState(defaultEtaDate.toISOString().split('T')[0]);
      const [country, setCountry] = React.useState('');
      const [region, setRegion] = React.useState('');
      const [pod, setPod] = React.useState('');
      const [unitPrice, setUnitPrice] = React.useState('');
      const [smallBags20kg, setSmallBags20kg] = React.useState(false);
      const [smallBagsKraft, setSmallBagsKraft] = React.useState(false);
      const [result, setResult] = React.useState(null);
      const [errors, setErrors] = React.useState({
        eta: '',
        country: '',
        region: '',
        pod: '',
        unitPrice: '',
        smallBags: ''
      });
      const [isLoading, setIsLoading] = React.useState(false);
      const [recentCalculations, setRecentCalculations] = React.useState([]);
      const [language, setLanguage] = React.useState('en');
      const [currentTime, setCurrentTime] = React.useState(today);
      const [showWelcome, setShowWelcome] = React.useState(true);

      const etaInputRef = React.useRef(null);

      React.useEffect(() => {
        const timer = setInterval(() => {
          setCurrentTime(new Date());
        }, 1000);
        return () => clearInterval(timer);
      }, []);

      const uniqueCountries = [...new Set(portsData.map(p => p.country))].sort();
      const regions = ["North", "South"];
      const availablePods = portsData
        .filter(p => p.country === country && (country !== "China" || p.region === region))
        .map(p => p.pod)
        .sort();

      React.useEffect(() => {
        const saved = localStorage.getItem('recentCalculationsETA');
        if (saved) {
          setRecentCalculations(JSON.parse(saved));
        }
      }, []);

      React.useEffect(() => {
        etaInputRef.current?.focus();
      }, [language]);

      const clearErrors = () => {
        setErrors({
          eta: '',
          country: '',
          region: '',
          pod: '',
          unitPrice: '',
          smallBags: ''
        });
      };

      const handleEtaChange = (e) => {
        setEta(e.target.value);
        setResult(null);
        clearErrors();
      };

      const handleSetToday = () => {
        setEta(today.toISOString().split('T')[0]);
        setResult(null);
        clearErrors();
      };

      const handleCountryChange = (e) => {
        setCountry(e.target.value);
        setRegion('');
        setPod('');
        setUnitPrice('');
        setSmallBags20kg(false);
        setSmallBagsKraft(false);
        setResult(null);
        clearErrors();
      };

      const handleRegionChange = (e) => {
        setRegion(e.target.value);
        setPod('');
        setUnitPrice('');
        setSmallBags20kg(false);
        setSmallBagsKraft(false);
        setResult(null);
        clearErrors();
      };

      const handlePodChange = (e) => {
        setPod(e.target.value);
        setUnitPrice('');
        setSmallBags20kg(false);
        setSmallBagsKraft(false);
        setResult(null);
        clearErrors();
      };

      const handleUnitPriceChange = (e) => {
        const value = e.target.value;
        if (value === "" || /^\d*$/.test(value)) {
          setUnitPrice(value);
          setResult(null);
          clearErrors();
        }
      };

      const handleUnitPriceBlur = () => {
        if (unitPrice) {
          const formatted = parseInt(unitPrice, 10);
          if (!isNaN(formatted)) {
            setUnitPrice(formatted.toString());
          }
        }
      };

      const handleSmallBags20kgChange = (e) => {
        setSmallBags20kg(e.target.checked);
        if (e.target.checked && smallBagsKraft) {
          setSmallBagsKraft(false);
        }
        setResult(null);
        clearErrors();
      };

      const handleSmallBagsKraftChange = (e) => {
        setSmallBagsKraft(e.target.checked);
        if (e.target.checked && smallBags20kg) {
          setSmallBags20kg(false);
        }
        setResult(null);
        clearErrors();
      };

      const handleReset = () => {
        setEta(defaultEtaDate.toISOString().split('T')[0]);
        setCountry('');
        setRegion('');
        setPod('');
        setUnitPrice('');
        setSmallBags20kg(false);
        setSmallBagsKraft(false);
        setResult(null);
        clearErrors();
        etaInputRef.current?.focus();
      };

      const clearHistory = () => {
        setRecentCalculations([]);
        localStorage.removeItem('recentCalculationsETA');
      };

      const calculateETA = (e) => {
        e.preventDefault();
        setIsLoading(true);

        setTimeout(() => {
          const newErrors = { ...errors };
          let hasError = false;

          if (!eta) {
            newErrors.eta = "Please select a required arrival date | 請選擇所需到達日期 | 请选择所需的到达日期 | Lütfen gerekli varış tarihini seçin | Sila pilih tarikh ketibaan yang diperlukan";
            hasError = true;
          }

          if (!country) {
            newErrors.country = "Please select a country | 請選擇一個國家 | 请选择一个国家 | Lütfen bir ülke seçin | Sila pilih sebuah negara";
            hasError = true;
          }

          if (country === "China" && !region) {
            newErrors.region = "Please select a region | 請選擇一個地區 | 请选择一个地区 | Lütfen bir bölge seçin | Sila pilih sebuah wilayah";
            hasError = true;
          }

          if (!pod) {
            newErrors.pod = "Please select a port of discharge | 請選擇一個卸貨港 | 请选择一个卸货港 | Lütfen bir boşaltma limanı seçin | Sila pilih pelabuhan pelepasan";
            hasError = true;
          }

          if (unitPrice) {
            const unitPriceValue = parseInt(unitPrice, 10);
            if (isNaN(unitPriceValue) || unitPriceValue <= 0) {
              newErrors.unitPrice = "Unit price must be a positive number | 單位價格必須為正數 | 单位价格必须为正数 | Birim fiyat pozitif bir sayı olmalıdır | Harga unit mestilah nombor positif";
              hasError = true;
            } else if (unitPriceValue > 10000) {
              newErrors.unitPrice = "Unit price is too large. Please enter a value up to 10,000 USD/MT | 單位價格過高。請輸入最多10,000美元/公噸的值 | 单位价格过高。请输入最高10,000美元/公吨的值 | Birim fiyat çok yüksek. Lütfen 10.000 USD/MT’ye kadar bir değer girin | Harga unit terlalu besar. Sila masukkan nilai sehingga 10,000 USD/MT";
              hasError = true;
            }
          }

          if (smallBags20kg && smallBagsKraft) {
            newErrors.smallBags = "Please select only one small bags option | 請僅選擇一個小袋選項 | 请仅选择一个小袋选项 | Lütfen yalnızca bir küçük torba seçeneği seçin | Sila pilih hanya satu pilihan beg kecil";
            hasError = true;
          }

          setErrors(newErrors);

          if (hasError) {
            setIsLoading(false);
            return;
          }

          const selectedPort = portsData.find(
            p => p.pod === pod && p.country === country && (country !== "China" || p.region === region)
          );

          if (!selectedPort) {
            setIsLoading(false);
            return;
          }

          const transitTime = selectedPort.transitTime; // 60 days for Dalian
          const preparationTime = 20;
          const etaDate = new Date(eta);
          etaDate.setHours(0, 0, 0, 0); // Normalize to start of day
          const todayDate = new Date(); // June 27, 2025, 08:19 PM HKT
          todayDate.setHours(0, 0, 0, 0); // Normalize to start of day
          const calculatedEtd = subtractDays(etaDate, transitTime); // Should be July 15, 2025 for ETA Sep 13
          const earliestEtd = addDays(todayDate, preparationTime); // July 17, 2025

          let resultObj;
          let reviseETAMessage = '';

          if (calculatedEtd < earliestEtd) {
            const earliestEta = addDays(earliestEtd, transitTime); // July 17 + 60 = September 15, 2025
            reviseETAMessage = translations[language].reviseETAMessage
              .replace('<earliestEtdDate>', formatDate(earliestEtd)) // First <date> = earliestEtd (July 17, 2025)
              .replace('<calculatedEtdDate>', formatDate(calculatedEtd)) // Second <date> = calculatedEtd (July 15, 2025)
              .replace('<newdate>', formatDate(earliestEta)); // <newdate> = earliestEta (September 15, 2025)
            setResult({ message: reviseETAMessage, summary: {}, notes: [] });
            setIsLoading(false);
            return;
          }

          const formattedEta = formatDate(etaDate);
          const formattedEtd = formatDate(calculatedEtd);

          resultObj = {
            message: translations[language].resultMessage
              .replace('<eta>', `<strong style="color: #808080">${formattedEta}</strong>`)
              .replace('<pod>', `<strong style="color: #10B981">${pod}, ${country.toUpperCase()}</strong>`)
              .replace('<date>', `<strong style="color: #3B82F6">${formattedEtd}</strong>`),
            summary: {
              eta: formattedEta,
              pod: `${pod}, ${country.toUpperCase()}`,
              etd: formattedEtd,
              preparationTime: `${preparationTime} days`,
              transitTime: `${transitTime} days`,
            },
            notes: []
          };

          if (unitPrice) {
            let unitPriceValue = parseInt(unitPrice, 10);
            const portAdditionalPrice = selectedPort.additionalPrice === "Spot" ? 0 : parseInt(selectedPort.additionalPrice, 10);
            let bagAdditionalPrice = 0;
            let bagNote = '';

            if (smallBags20kg) {
              bagAdditionalPrice = 15;
              bagNote = translations[language].noteSmallBags20kg;
            } else if (smallBagsKraft) {
              bagAdditionalPrice = 25;
              bagNote = translations[language].noteSmallBagsKraft;
            }

            const finalPrice = unitPriceValue + portAdditionalPrice + bagAdditionalPrice;

            resultObj = {
              message: translations[language].resultMessageWithPrice
                .replace('<eta>', `<strong style="color: #808080">${formattedEta}</strong>`)
                .replace('<pod>', `<strong style="color: #10B981">${pod}, ${country.toUpperCase()}</strong>`)
                .replace('<date>', `<strong style="color: #3B82F6">${formattedEtd}</strong>`)
                .replace('<price>', `<strong style="color: #9333EA">${formatNumber(finalPrice)}</strong>`),
              summary: {
                eta: formattedEta,
                pod: `${pod}, ${country.toUpperCase()}`,
                etd: formattedEtd,
                preparationTime: `${preparationTime} days`,
                transitTime: `${transitTime} days`,
                unitPrice: `${formatNumber(unitPriceValue)} USD/MT`,
                portAdditionalPrice: selectedPort.additionalPrice === "Spot" ? "Spot" : `${formatNumber(portAdditionalPrice)} USD/MT`,
                bagAdditionalPrice: bagAdditionalPrice ? `${formatNumber(bagAdditionalPrice)} USD/MT` : null,
                finalPrice: `${formatNumber(finalPrice)} USD/MT`
              },
              notes: resultObj.notes
            };

            if (bagNote && !resultObj.notes.some(note => note.text === bagNote)) {
              resultObj.notes.push({ text: bagNote, id: resultObj.notes.length + 1 });
            } else if (selectedPort.additionalPrice === "Spot" && !resultObj.notes.some(note => note.text.includes("Spot"))) {
              resultObj.notes.push({ text: translations[language].noteSpotPrice.replace('<pod>', pod), id: resultObj.notes.length + 1 });
            }
          } else if (selectedPort.additionalPrice === "Spot" && !resultObj.notes.some(note => note.text.includes("Spot"))) {
            resultObj.notes.push({ text: translations[language].noteSpotPrice.replace('<pod>', pod), id: 1 });
          }

          setResult(resultObj);

          const newCalc = {
            message: resultObj.message,
            timestamp: new Date().toLocaleString()
          };
          const updatedCalcs = [newCalc, ...recentCalculations].slice(0, 5);
          setRecentCalculations(updatedCalcs);
          localStorage.setItem('recentCalculationsETA', JSON.stringify(updatedCalcs));

          setIsLoading(false);
        }, 500);
      };

      const copyResult = () => {
        if (result) {
          const summaryText = Object.entries(result.summary)
            .filter(([key, value]) => value !== null)
            .map(([key, value]) => `${translations[language][key] || key}: ${value}`)
            .join('\n');
          const textToCopy = `${result.message.replace(/<[^>]+>/g, '')}\n\n${summaryText}`;
          navigator.clipboard.writeText(textToCopy)
            .then(() => alert('Result copied to clipboard!'))
            .catch(err => console.error('Failed to copy text: ', err));
        }
      };

      return (
        <div className="bg-gray-200 min-h-screen flex items-center justify-center p-4 relative">
          <div className="app-container bg-white shadow-lg rounded-lg">
            <div className="p-8 relative">
              <div className="absolute top-2 left-4 text-sm text-gray-600 font-medium" style={{ color: '#1E3A8A' }}>
                {formatTimeWithSeconds(currentTime)} | {currentTime.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })} | GMT+08
              </div>
              <div className="absolute top-8 right-5">
                <select
                  className="px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-600"
                  value={language}
                  onChange={(e) => setLanguage(e.target.value)}
                >
                  <option value="en">English</option>
                  <option value="zh">繁體中文（中國香港）</option>
                  <option value="zh-cn">简体中文（中国大陆）</option>
                  <option value="tr">Türkçe</option>
                  <option value="ms">Bahasa Melayu</option>
                </select>
              </div>
              <div className="flex flex-col items-center mb-8">
                <img 
                  src="https://raw.githubusercontent.com/zmyeo54/etimaden-html-share/refs/heads/main/assets/Etimaden%20For%20Life%20Logo.png" 
                  alt="Etimaden For Life" 
                  className="h-25 logo-animate" 
                  style={{ marginTop: '30px', marginBottom: '50px' }}
                />
                <h1 className="text-3xl font-bold text-center text-blue-900 mb-[-10px] mt-[-50px]">ETA Calculator</h1>
              </div>
              {showWelcome && (
                <div className="modal">
                  <div className="modal-content">
                    <span className="close-button" onClick={() => setShowWelcome(false)}>×</span>
                    <h2 className="text-2xl font-bold text-blue-900 mb-4">{translations[language].welcomeTitle}</h2>
                    <p className="text-gray-600 mb-4" dangerouslySetInnerHTML={{ __html: translations[language].welcomeMessage }}></p>
                    <p className="text-gray-600 mb-4" dangerouslySetInnerHTML={{ __html: translations[language].welcomeInstruction2 }}></p>
                    <select
                      className="px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-600"
                      value={language}
                      onChange={(e) => setLanguage(e.target.value)}
                    >
                      <option value="en">English</option>
                      <option value="zh">繁體中文（中國香港）</option>
                      <option value="zh-cn">简体中文（中国大陆）</option>
                      <option value="tr">Türkçe</option>
                      <option value="ms">Bahasa Melayu</option>
                    </select>
                  </div>
                </div>
              )}
              <form onSubmit={calculateETA} className="space-y-6 mt-6">
                <div>
                  <Tooltip text={translations[language].etaTooltip}>
                    <label htmlFor="eta" className="block text-base font-medium text-gray-700 mb-2">
                      {translations[language].etaLabel}
                    </label>
                  </Tooltip>
                  <div className="flex space-x-2">
                    <input
                      id="eta"
                      type="date"
                      value={eta}
                      onChange={handleEtaChange}
                      ref={etaInputRef}
                      className="mt-1 flex-1 px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600"
                      min={today.toISOString().split('T')[0]} // Restrict past dates (true)
                    />
                    <button
                      type="button"
                      onClick={handleSetToday}
                      className="mt-1 bg-gray-200 text-gray-700 font-semibold py-3 px-4 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-600"
                    >
                      {translations[language].todayButton}
                    </button>
                  </div>
                  {errors.eta && (
                    <div className="mt-2 flex items-center text-sm text-red-600">
                      <AlertCircle />
                      <span className="ml-1">{errors.eta}</span>
                    </div>
                  )}
                </div>
                <div>
                  <Tooltip text={translations[language].countryTooltip}>
                    <label htmlFor="country" className="block text-base font-medium text-gray-700 mb-2">
                      {translations[language].countryLabel}
                    </label>
                  </Tooltip>
                  <select
                    id="country"
                    value={country}
                    onChange={handleCountryChange}
                    className="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600"
                  >
                    <option value="">{translations[language].selectOption} {translations[language].countryLabel}</option>
                    {uniqueCountries.map((c) => (
                      <option key={c} value={c}>{c}</option>
                    ))}
                  </select>
                  {errors.country && (
                    <div className="mt-2 flex items-center text-sm text-red-600">
                      <AlertCircle />
                      <span className="ml-1">{errors.country}</span>
                    </div>
                  )}
                </div>
                {country === "China" && (
                  <div>
                    <Tooltip text={translations[language].regionTooltip}>
                      <label htmlFor="region" className="block text-base font-medium text-gray-700 mb-2">
                        {translations[language].regionLabel}
                      </label>
                    </Tooltip>
                    <select
                      id="region"
                      value={region}
                      onChange={handleRegionChange}
                      className="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600"
                    >
                      <option value="">{translations[language].selectOption} {translations[language].regionLabel}</option>
                      {regions.map((r) => (
                        <option key={r} value={r}>{r}</option>
                      ))}
                    </select>
                    {errors.region && (
                      <div className="mt-2 flex items-center text-sm text-red-600">
                        <AlertCircle />
                        <span className="ml-1">{errors.region}</span>
                      </div>
                    )}
                  </div>
                )}
                <div>
                  <Tooltip text={translations[language].podTooltip}>
                    <label htmlFor="pod" className="block text-base font-medium text-gray-700 mb-2">
                      {translations[language].podLabel}
                    </label>
                  </Tooltip>
                  <select
                    id="pod"
                    value={pod}
                    onChange={handlePodChange}
                    disabled={!country || (country === "China" && !region)}
                    className="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600 disabled:bg-gray-100"
                  >
                    <option value="">{translations[language].selectOption} {translations[language].podLabel}</option>
                    {availablePods.map((p) => (
                      <option key={p} value={p}>{p}</option>
                    ))}
                  </select>
                  {errors.pod && (
                    <div className="mt-2 flex items-center text-sm text-red-600">
                      <AlertCircle />
                      <span className="ml-1">{errors.pod}</span>
                    </div>
                  )}
                </div>
                <div className="mt-6 p-4 bg-white border border-gray-200 rounded-md shadow-md">
                  <h2 className="text-xl font-bold text-gray-800 mb-0">{translations[language].priceCalculator}</h2>
                  <p className="text-sm text-gray-600 mb-2" dangerouslySetInnerHTML={{ __html: translations[language].priceCalculatorSubheader }}></p>
                  <div>
                    <Tooltip text={translations[language].unitPriceTooltip}>
                      <label htmlFor="unitPrice" className="block text-base font-medium text-gray-700 mb-2">
                        {translations[language].unitPriceLabel}
                      </label>
                    </Tooltip>
                    <input
                      id="unitPrice"
                      type="text"
                      value={unitPrice}
                      onChange={handleUnitPriceChange}
                      onBlur={handleUnitPriceBlur}
                      className="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600"
                      placeholder="e.g., 575"
                    />
                    {errors.unitPrice && (
                      <div className="mt-2 flex items-center text-sm text-red-600">
                        <AlertCircle />
                        <span className="ml-1">{errors.unitPrice}</span>
                      </div>
                    )}
                    <div className="mt-4 space-y-2">
                      <Tooltip text={translations[language].smallBags20kgTooltip}>
                        <label className="flex items-center text-sm text-gray-600">
                          <input
                            type="checkbox"
                            checked={smallBags20kg}
                            onChange={handleSmallBags20kgChange}
                            className="mr-2"
                          />
                          {translations[language].smallBags20kg}
                        </label>
                      </Tooltip>
                      <Tooltip text={translations[language].smallBagsKraftTooltip}>
                        <label className="flex items-center text-sm text-gray-600">
                          <input
                            type="checkbox"
                            checked={smallBagsKraft}
                            onChange={handleSmallBagsKraftChange}
                            className="mr-2"
                          />
                          {translations[language].smallBagsKraft}
                        </label>
                      </Tooltip>
                      {errors.smallBags && (
                        <div className="mt-2 flex items-center text-sm text-red-600">
                          <AlertCircle />
                          <span className="ml-1">{errors.smallBags}</span>
                        </div>
                      )}
                    </div>
                  </div>
                </div>
                <div className="flex space-x-4">
                  <button
                    type="submit"
                    className="flex-1 bg-blue-600 text-white font-semibold py-3 px-4 rounded-md hover:bg-blue-700 hover:scale-105 transform transition focus:outline-none focus:ring-2 focus:ring-blue-600 flex items-center justify-center disabled:opacity-50"
                    disabled={isLoading}
                  >
                    {isLoading && <Loader />}
                    <span className={isLoading ? "ml-2" : ""}>{isLoading ? translations[language].calculating : translations[language].calculateButton}</span>
                  </button>
                  <button
                    type="button"
                    onClick={handleReset}
                    className="flex-1 bg-red-600 text-white font-semibold py-1 px-2 rounded-md hover:bg-red-700 hover:scale-105 transform transition focus:outline-none focus:ring-2 focus:ring-red-600"
                  >
                    {translations[language].resetButton}
                  </button>
                </div>
                {result && (
                  <div className="mt-6 p-6 bg-gradient-to-r from-blue-50 to-white rounded-lg shadow-md border border-blue-200">
                    <p className="result-text text-center text-lg text-gray-800 mb-4" dangerouslySetInnerHTML={{ __html: result.message }}></p>
                    {result.notes.length > 0 && (
                      <div className="text-left text-sm text-gray-600">
                        {result.notes.map((note, index) => (
                          <p key={index}>{note.text.replace(/<[^>]+>/g, '')}</p>
                        ))}
                      </div>
                    )}
                    <div className="disclaimer-section">
                      {translations[language].disclaimer.replace('<currentdatetime>', formatFullDateTime(currentTime))}
                    </div>
                  </div>
                )}
              </form>
              {result && !result.message.includes(translations[language].reviseETAMessage) && (
                <div className="mt-6">
                  <div className="summary-section">
                    <div className="summary-header">{translations[language].summary}</div>
                    <div className="space-y-4">
                      <div>
                        <h4 className="text-lg font-bold text-blue-800">{translations[language].shippingDetails}</h4>
                        <div className="summary-item">
                          <span className="summary-label">{translations[language].eta}:</span>
                          <span className="summary-value" style={{ fontWeight: 'bold', color: '#808080' }}>{result.summary.eta}</span>
                        </div>
                        <div className="summary-item">
                          <span className="summary-label">{translations[language].pod}:</span>
                          <span className="summary-value" style={{ fontWeight: 'bold', color: '#10B981' }}>{result.summary.pod}</span>
                        </div>
                        <div className="summary-item">
                          <span className="summary-label">{translations[language].etd}:</span>
                          <span className="summary-value" style={{ fontWeight: 'bold', color: '#3B82F6' }}>{result.summary.etd}</span>
                        </div>
                      </div>
                      <div>
                        <h4 className="text-lg font-bold text-blue-800">{translations[language].timing}</h4>
                        <div className="summary-item">
                          <span className="summary-label">{translations[language].preparationTime}:</span>
                          <span className="summary-value">{result.summary.preparationTime}</span>
                        </div>
                        <div className="summary-item">
                          <span className="summary-label">{translations[language].transitTime}:</span>
                          <span className="summary-value">{result.summary.transitTime}</span>
                        </div>
                      </div>
                      {result.summary.unitPrice && (
                        <div>
                          <h4 className="text-lg font-bold text-blue-800">{translations[language].pricing}</h4>
                          <div className="summary-item">
                            <span className="summary-label">{translations[language].unitPrice}:</span>
                            <span className="summary-value">{result.summary.unitPrice}</span>
                          </div>
                          <div className="summary-item">
                            <span className="summary-label">{translations[language].portAdditionalPrice}:</span>
                            <span className="summary-value">{result.summary.portAdditionalPrice}</span>
                          </div>
                          <div className="summary-item">
                            <span className="summary-label">{translations[language].bagAdditionalPrice}:</span>
                            <span className="summary-value">{result.summary.bagAdditionalPrice || '0 USD/MT'}</span>
                          </div>
                          <div className="summary-item">
                            <span className="summary-label">{translations[language].finalPrice}:</span>
                            <span className="summary-value final-price">{result.summary.finalPrice}</span>
                          </div>
                        </div>
                      )}
                    </div>
                    <button
                      onClick={copyResult}
                      className="mt-4 w-full bg-green-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-600"
                    >
                      {translations[language].copyResult}
                    </button>
                  </div>
                  <div className="mt-4">
                    <div className="flex justify-between items-center">
                      <h3 className="text-lg font-bold text-blue-800">{translations[language].recentResults}</h3>
                      <button
                        onClick={clearHistory}
                        className="bg-red-600 text-white font-semibold py-1 px-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 text-sm"
                      >
                        {translations[language].clearAll}
                      </button>
                    </div>
                    {recentCalculations.length > 0 ? (
                      <div className="mt-2">
                        {recentCalculations.map((calc, index) => (
                          <div key={index} className="mt-2 p-3 bg-white border border-gray-200 rounded-md shadow-md">
                            <p className="text-sm text-gray-600" dangerouslySetInnerHTML={{ __html: calc.message }}></p>
                            <span className="text-xs text-gray-400 block mt-1">{calc.timestamp}</span>
                          </div>
                        ))}
                      </div>
                    ) : (
                      <p className="text-sm text-gray-600 mt-2">No recent calculations | 最近無計算 | 最近没有计算 | Son zamanlarda hesaplama yok | Tiada pengiraan baru-baru ini</p>
                    )}
                  </div>
                </div>
              )}
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<ETACalculator />, document.getElementById('root'));

document.addEventListener('contextmenu', (e) => {
  e.preventDefault();
;
});

  </script>
</body>
</html>
